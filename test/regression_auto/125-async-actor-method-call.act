import acton.rts
import time

actor sleeper():
    def sleep(sleep_time):
        acton.rts.sleep(sleep_time)

actor main(env):
    def work():
        s1 = sleeper()
        s2 = sleeper()
        s = time.Stopwatch()
        # this is not an assignment, so sleep() should run async and thus take
        # like 0 time
        s1.sleep(0.1)
        s2.sleep(0.1)
        print("hej")
        d = s.elapsed()
        print(d)
        if d.to_float() > 0.1:
            print("Diff (", d, ") is larger than expected")
            exit(env.cap, 1)

    work()
    exit(env.cap, 0)
