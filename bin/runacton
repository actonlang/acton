#!/bin/sh
# runacton, through use of a shebang line, allows execution of Acton source
# files a la "shell script" style. Start your .act source code file with:
#
#   #!/usr/bin/env runacton
#
# And you can execute it directly! Under the hood the .act source file is
# compiled by acton into a binary which is then executed. The original
# arguments are passed through.

set -e

if [ $# -lt 1 ]; then
  echo "runacton: missing .act file path (runacton is meant to be invoked via shebang)" >&2
  exit 2
fi

script="$1"
ACTON_RUNACTON=1 acton --quiet "$script"
EXEC="${script%.act}"
shift
exec "$EXEC" "$@"
